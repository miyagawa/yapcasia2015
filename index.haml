!!! 5
%html
  %title YAPC::Asia 2015
  %link{rel: "stylesheet", type: "text/css", class: "ui", href: "//oss.maxcdn.com/semantic-ui/2.0.8/semantic.min.css"}
  %script{type: "text/javascript", src: "//code.jquery.com/jquery-1.11.3.min.js"}
  %script{type: "text/javascript", src: "//oss.maxcdn.com/semantic-ui/2.0.8/semantic.min.js"}
  :css
    .talk-title { color: #000; font-weight: bold; }
  :javascript
    jQuery(function(){
      $('.talk-title').click(function(){
        $("#modal-" + $(this).data('id')).modal('setting', 'transition', 'fade').modal("show");
        history.replaceState({}, "", '#' + $(this).data('id'));
      });
      if (navigator.language.match(/^en/)) {
        $('.alternative').each(function() {
          $(this).text($(this).data('alt'));
        });
      }
    });
  %body{style: "padding: 1em"}
    - schedule.each_with_index do |event, i|
      %h2.ui.header.aligned.center.horizontal.divider{id: "day-#{i}"}
        %i.icon.calendar
        = event["date"]
      .ui.grid
        .row
          .one.wide.column
          - event["rooms"].each do |room|
            .three.wide.column.center.aligned
              %strong= room
        - event["slots"].each do |slot|
          .stretched.row
            .one.wide.column
              - slot["hour"].each do |hour|
                .ui.vertical.segment= hour
            - slot["talks"].each do |talks|
              .three.wide.column
                - talks.each do |talk|
                  - if talk
                    .ui.modal{id: "modal-#{talk['id']}"}
                      .header.alternative{data: {alt: talk["title_en"]}}= talk["title"]
                      .image.content
                        .ui.medium.image.circular
                          %img{src: talk["avatar"], alt: talk["speaker"]}
                        .description
                          .ui.header= talk["speaker"]
                          = talk["description"]
                          .ui.label= talk["language"]
                          - talk["labels"].each do |label|
                            .ui.label= label
                    .ui.cards
                      .card{id: talk["id"]}
                        .content
                          %a.talk-title.alternative{data: {"id": talk["id"], "alt": talk["title_en"]} }= talk["title"]
                          .meta= talk["language"] + ", " + talk["duration"] + " min"
                          .description
                            %img.ui.avatar.imager{src: talk["avatar"]}
                            = talk["speaker"]
